---
import Loading from '../components/Loading.astro';
---

<div id="projects-list-container">
	<Loading />
</div>

<script>
	async function loadProjects() {
		const container = document.getElementById('projects-list-container');
		if (!container) return;

		try {
			const response = await fetch('/partials/projects-list');
			if (!response.ok) throw new Error('Failed to load projects');
			const html = await response.text();
			container.innerHTML = html;
		} catch (error) {
			console.error('Error loading projects:', error);
			container.innerHTML = `
				<div class="p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400" role="alert">
					<span class="font-medium">Error!</span> Failed to load projects. Please try again later.
				</div>
			`;
		}
	}

	loadProjects();
</script>
